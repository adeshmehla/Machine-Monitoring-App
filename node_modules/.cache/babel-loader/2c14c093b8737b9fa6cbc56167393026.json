{"ast":null,"code":"import _regeneratorRuntime from \"E:/adesh/Pardeep sir projects/machine-maintence/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"E:/adesh/Pardeep sir projects/machine-maintence/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"E:/adesh/Pardeep sir projects/machine-maintence/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"E:\\\\adesh\\\\Pardeep sir projects\\\\machine-maintence\\\\react-app\\\\src\\\\component\\\\feature\\\\login.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, Form, Input, Tooltip, Typography } from \"antd\";\nimport { useNavigate } from \"react-router-dom\";\nimport styles from \"./feature.module.css\";\nimport { degination, isAuth } from \"../redux/pageSlice\";\nimport { useDispatch } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport var Login = function Login() {\n  _s();\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    employeeName = _useState4[0],\n    setEmployeeName = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    employeeType = _useState6[0],\n    setEmployeeType = _useState6[1];\n  var loadData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            axios.get(\"http://localhost:5000/api/login\").then(function (res) {\n              return setData(res.data);\n            }).then(function (err) {\n              return console.log(err, \"error\");\n            });\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function loadData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    loadData();\n\n    // localStorage.clear();\n  }, []);\n  var _Form$useForm = Form.useForm(),\n    _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n    form = _Form$useForm2[0];\n  var dispatch = useDispatch();\n  var navigate = useNavigate(\"\");\n  var onFinish = function onFinish(values) {\n    // setTimeNow(time.getTime());\n    console.log(employeeType, 'oooooooooooooooooooo');\n    if (values) {\n      var loginAuth = data.filter(function (i) {\n        return i.password === values.password;\n      });\n      if (loginAuth) {\n        if (employeeType === \"manager\") {\n          navigate(\"/ManagerHomePage\");\n          console.log(\"in if condition and why\");\n          window.location.reload();\n          localStorage.setItem(\"isManager\", \"manager\");\n          dispatch(isAuth());\n        } else if (employeeType === \"mechanic\") {\n          console.log(\"in else if 2 condition and why\");\n          // setState(pre=>pre+2)\n          navigate(\"/mechanicdatatable\");\n          localStorage.setItem(\"isMechanic\", \"mechanic\");\n          dispatch(isAuth());\n          window.location.reload();\n        } else if (employeeType === \"supervisor\") {\n          // setState(pre=>pre+2)\n          console.log(\"in else if 3 condition and why\");\n          navigate(\"/supervisorScanner\");\n          localStorage.setItem(\"isSupervisor\", \"supervisor\");\n          dispatch(isAuth());\n          window.location.reload();\n        } else {\n          alert(\"Login failed wrong user credentials\");\n        }\n      }\n    } else {\n      alert(\"please add card Number or password\");\n    }\n  };\n  var handleGetEmployeeName = function handleGetEmployeeName(e) {\n    // console.log(e.target.value,'--------------')\n    var b = data.filter(function (i) {\n      return i.card_number === e.target.value;\n    });\n    if (!b.length) {\n      alert(\"Wrong Card Number\");\n    } else {\n      setEmployeeName(b[0].employee_name);\n      setEmployeeType(b[0].credential_type);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.main_container,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.container,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Login \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(Form, {\n          form: form,\n          className: styles.form_container,\n          layout: \"vertical\",\n          initialValues: {\n            employee_name: \"default value\"\n          },\n          name: \"nest-messages\",\n          onFinish: onFinish,\n          style: {\n            maxWidth: 600\n          }\n          // validateMessages={validateMessages}\n          ,\n          children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n            name: [\"user\", \"card_number\"],\n            label: \"Card Number\",\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              type: \"number\",\n              onBlur: handleGetEmployeeName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Employee Name\",\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              children: employeeName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: [\"user\", \"password\"],\n            label: \"Your Password\",\n            rules: [{\n              required: true\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              type: \"password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            wrapperCol: {\n              offset: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              className: styles.feature_btn,\n              type: \"primary\",\n              htmlType: \"submit\",\n              children: \"Sign in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false);\n};\n_s(Login, \"JpGAXHQGuedHWzWiZJ2FHrXHGsQ=\", false, function () {\n  return [Form.useForm, useDispatch, useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","axios","Button","Form","Input","Tooltip","Typography","useNavigate","styles","degination","isAuth","useDispatch","Login","data","setData","employeeName","setEmployeeName","employeeType","setEmployeeType","loadData","get","then","res","err","console","log","useForm","form","dispatch","navigate","onFinish","values","loginAuth","filter","i","password","window","location","reload","localStorage","setItem","alert","handleGetEmployeeName","e","b","card_number","target","value","length","employee_name","credential_type","main_container","container","form_container","maxWidth","required","offset","feature_btn"],"sources":["E:/adesh/Pardeep sir projects/machine-maintence/react-app/src/component/feature/login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Button, Form,  Input, Tooltip, Typography } from \"antd\";\nimport {useNavigate } from \"react-router-dom\";\nimport styles from \"./feature.module.css\";\nimport { degination, isAuth } from \"../redux/pageSlice\";\nimport { useDispatch } from \"react-redux\";\nexport const Login = () => {\n  const [data, setData] = useState(null);\n  const [employeeName, setEmployeeName] = useState(\"\");\n  const [employeeType, setEmployeeType] = useState([]);\n  const loadData = async () => {\n    axios\n      .get(\"http://localhost:5000/api/login\")\n      .then((res) => setData(res.data))\n      .then((err) => console.log(err, \"error\"));\n  };\n  useEffect(() => {\n    loadData();\n    \n    // localStorage.clear();\n  }, []);\n  const [form] = Form.useForm();\n  const dispatch = useDispatch();\n  const navigate = useNavigate(\"\");\n\n  const onFinish = (values) => {\n    // setTimeNow(time.getTime());\n    console.log(employeeType,'oooooooooooooooooooo')\n    if (values) {\n     const loginAuth = data.filter(i=>i.password === values.password)\n    if(loginAuth){\n      if (employeeType === \"manager\") {\n        navigate(\"/ManagerHomePage\");\n        console.log(\"in if condition and why\");\n        window.location.reload();\n        localStorage.setItem(\"isManager\", \"manager\");\n        dispatch(isAuth());\n      } else if (employeeType === \"mechanic\") {\n        console.log(\"in else if 2 condition and why\");\n        // setState(pre=>pre+2)\n        navigate(\"/mechanicdatatable\");\n        localStorage.setItem(\"isMechanic\", \"mechanic\");\n        dispatch(isAuth());\n        window.location.reload();\n      } else if (employeeType === \"supervisor\") {\n        // setState(pre=>pre+2)\n        console.log(\"in else if 3 condition and why\");\n        navigate(\"/supervisorScanner\");\n        localStorage.setItem(\"isSupervisor\", \"supervisor\");\n        dispatch(isAuth());\n        window.location.reload();\n      }else {\n        alert(\"Login failed wrong user credentials\");\n      }\n    }\n    }else{\n      alert(\"please add card Number or password\")\n    }\n  };\n  const handleGetEmployeeName = (e) => {\n    // console.log(e.target.value,'--------------')\n    let b = data.filter((i) => i.card_number === e.target.value);\n    if (!b.length) {\n      alert(\"Wrong Card Number\");\n    } else {\n      setEmployeeName(b[0].employee_name);\n     setEmployeeType(b[0].credential_type)\n    }\n  };\n\n  return (\n    <>\n      <div className={styles.main_container}>\n        <div className={styles.container}>\n          <h2>Login </h2>\n          <Form\n            form={form}\n            className={styles.form_container}\n            layout=\"vertical\"\n            initialValues={{ employee_name: \"default value\" }}\n            name=\"nest-messages\"\n            onFinish={onFinish}\n            style={{\n              maxWidth: 600,\n            }}\n            // validateMessages={validateMessages}\n          >\n            <Form.Item name={[\"user\", \"card_number\"]} label=\"Card Number\">\n              <Input type=\"number\" onBlur={handleGetEmployeeName} />\n            </Form.Item>\n            <Tooltip title=\"Employee Name\">\n              <Typography>{employeeName}</Typography>\n            </Tooltip>\n\n            <Form.Item\n              name={[\"user\", \"password\"]}\n              label=\"Your Password\"\n              rules={[\n                {\n                  required: true,\n                },\n              ]}\n            >\n              <Input type=\"password\" />\n            </Form.Item>\n            <Form.Item\n              wrapperCol={{\n                offset: 1,\n              }}\n            >\n              <Button\n                className={styles.feature_btn}\n                type=\"primary\"\n                htmlType=\"submit\"\n              >\n                Sign in\n              </Button>\n            </Form.Item>\n          </Form>\n        </div>\n      </div>\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}