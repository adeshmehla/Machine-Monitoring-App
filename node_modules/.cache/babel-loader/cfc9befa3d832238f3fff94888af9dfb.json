{"ast":null,"code":"import _slicedToArray from \"E:/adesh/Pardeep sir projects/machine-maintence/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"E:\\\\adesh\\\\Pardeep sir projects\\\\machine-maintence\\\\react-app\\\\src\\\\component\\\\pages\\\\managerPages\\\\inventory\\\\partScanner.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\n// import styles from './pageStyle.module.css'\n// import {Button} from 'antd'\nimport { Html5Qrcode } from \"html5-qrcode\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { scannerData, mechanic_name } from '../../redux/pageSlice';\n// import { getCameraList } from \"./Utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar qrConfig = {\n  fps: 10,\n  qrbox: {\n    width: 350,\n    height: 400\n  }\n};\nvar html5QrCode;\nexport var PartScanner = function PartScanner() {\n  _s();\n  var fileRef = useRef(null);\n  var navigate = useNavigate();\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    cameraList = _useState2[0],\n    setCameraList = _useState2[1];\n  var dispatch = useDispatch();\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    activeCamera = _useState4[0],\n    setActiveCamera = _useState4[1];\n  useEffect(function () {\n    html5QrCode = new Html5Qrcode(\"reader\");\n    getCameras();\n    var oldRegion = document.getElementById(\"qr-shaded-region\");\n    oldRegion && oldRegion.remove();\n    handleClickAdvanced();\n  }, []);\n  var handleClickAdvanced = function handleClickAdvanced() {\n    var qrCodeSuccessCallback = function qrCodeSuccessCallback(decodedText, decodedResult) {\n      var v = JSON.parse(JSON.stringify(decodedText));\n      var b = JSON.parse(v);\n      dispatch(scannerData(b));\n      navigate('/mechanic');\n      handleStop();\n    };\n    html5QrCode.start({\n      facingMode: \"environment\"\n    }, qrConfig, qrCodeSuccessCallback).then(function () {});\n  };\n  var getCameras = function getCameras() {\n    Html5Qrcode.getCameras().then(function (devices) {\n      console.info(devices);\n      if (devices && devices.length) {\n        setCameraList(devices);\n        setActiveCamera(devices[0]);\n      }\n    }).catch(function (err) {\n      console.error(err);\n      setCameraList([]);\n    });\n  };\n  var handleStop = function handleStop() {\n    try {\n      html5QrCode.stop().then(function (res) {\n        html5QrCode.clear();\n      }).catch(function (err) {\n        console.log(err.message);\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"reader\",\n      width: \"100%\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: \"whitesmoke\",\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Scan your qr code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 8\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 7\n  }, _this);\n};\n_s(PartScanner, \"Dl44TA3q+ZZrdFeOSJglxuDXg2E=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n_c = PartScanner;\nvar _c;\n$RefreshReg$(_c, \"PartScanner\");","map":{"version":3,"names":["React","useEffect","useState","useRef","Html5Qrcode","useNavigate","useDispatch","scannerData","mechanic_name","qrConfig","fps","qrbox","width","height","html5QrCode","PartScanner","fileRef","navigate","cameraList","setCameraList","dispatch","activeCamera","setActiveCamera","getCameras","oldRegion","document","getElementById","remove","handleClickAdvanced","qrCodeSuccessCallback","decodedText","decodedResult","v","JSON","parse","stringify","b","handleStop","start","facingMode","then","devices","console","info","length","catch","err","error","stop","res","clear","log","message","position","backgroundColor","textAlign"],"sources":["E:/adesh/Pardeep sir projects/machine-maintence/react-app/src/component/pages/managerPages/inventory/partScanner.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\n// import styles from './pageStyle.module.css'\r\n// import {Button} from 'antd'\r\nimport { Html5Qrcode } from \"html5-qrcode\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {scannerData,mechanic_name} from '../../redux/pageSlice'\r\n// import { getCameraList } from \"./Utils\";\r\n\r\nconst qrConfig = { fps: 10, qrbox: { width: 350, height: 400 } };\r\nlet html5QrCode;\r\n\r\nexport const PartScanner = () => {\r\n    const fileRef = useRef(null);\r\n  \r\n    const navigate = useNavigate()\r\n    const [cameraList, setCameraList] = useState([]);\r\n    const dispatch = useDispatch();\r\n    const [activeCamera, setActiveCamera] = useState();\r\n    useEffect(() => {\r\n      html5QrCode = new Html5Qrcode(\"reader\");\r\n      getCameras();\r\n      const oldRegion = document.getElementById(\"qr-shaded-region\");\r\n      oldRegion && oldRegion.remove();\r\n    \r\n      handleClickAdvanced()\r\n    },[]);\r\n  \r\n    const handleClickAdvanced = () => {\r\n      const qrCodeSuccessCallback = (decodedText, decodedResult) => {\r\n        let v= JSON.parse(JSON.stringify(decodedText));\r\n                const b = JSON.parse(v)\r\n        dispatch(scannerData(b));\r\n        navigate('/mechanic')\r\n        handleStop();\r\n      };\r\n      html5QrCode\r\n        .start(\r\n          { facingMode: \"environment\" },\r\n        qrConfig,\r\n          qrCodeSuccessCallback\r\n        )\r\n        .then(() => {\r\n        });\r\n    };\r\n    const getCameras = () => {\r\n      Html5Qrcode.getCameras()\r\n        .then((devices) => {\r\n          console.info(devices);\r\n          if (devices && devices.length) {\r\n            setCameraList(devices);\r\n            setActiveCamera(devices[0]);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n          setCameraList([]);\r\n        });\r\n    };\r\n    const handleStop = () => {\r\n      try {\r\n        html5QrCode\r\n          .stop()\r\n          .then((res) => {\r\n            html5QrCode.clear();\r\n          })\r\n          .catch((err) => {\r\n            console.log(err.message);\r\n          });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    return (\r\n      <div style={{ position: \"relative\" }}>\r\n      <div id=\"reader\" width=\"100%\"></div>\r\n       <div style={{backgroundColor:\"whitesmoke\",textAlign:\"center\"}}>\r\n    <h1>Scan your qr code</h1>\r\n      </div>\r\n    </div>\r\n    );\r\n  };\r\n  \r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module"}