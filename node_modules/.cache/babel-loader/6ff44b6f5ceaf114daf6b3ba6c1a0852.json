{"ast":null,"code":"import _regeneratorRuntime from \"E:/adesh/machine-maintence/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"E:/adesh/machine-maintence/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"E:/adesh/machine-maintence/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"E:\\\\adesh\\\\machine-maintence\\\\src\\\\component\\\\qr_code.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport { Button } from 'antd';\nimport { useState, useRef } from 'react';\nimport QrScanner from 'qr-scanner';\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { scannerData } from './redux/pageSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var QrCode = function QrCode(_ref) {\n  _s();\n  var dataFun = _ref.dataFun;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    file = _useState2[0],\n    setfile = _useState2[1];\n  // const [data, setData] = useState(null);\n  var dispatch = useDispatch();\n  var designation_type = useSelector(function (state) {\n    return state.pageReducer.degination_type;\n  });\n  var navigate = useNavigate('');\n  var fileRef = useRef();\n  var openScaner = function openScaner() {\n    fileRef.current.click();\n  };\n  var handleScaner = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n      var file, result, b;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            file = e.target.files[0];\n            setfile(file);\n            _context.next = 4;\n            return QrScanner.scanImage(file);\n          case 4:\n            result = _context.sent;\n            if (result.length) {\n              b = result.split(\" \")[0]; // setData(result.split(\"\"))\n              console.log(b, \"+++++++++++white something saying\");\n              dataFun(JSON.parse(b));\n              dispatch(scannerData(JSON.parse(b)));\n              console.log(designation_type, 'innn qrcode page');\n              if (designation_type === \"Machanic\") {\n                navigate('/machanic');\n              } else {\n                navigate('/supervisor');\n              }\n            }\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function handleScaner(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      onClick: openScaner,\n      children: \"Scan Qr Code\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 1\n    }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      ref: fileRef,\n      onChange: handleScaner,\n      style: {\n        display: 'none'\n      },\n      accept: \".png, .jpg, .jpeg, .webp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 7\n  }, _this);\n};\n_s(QrCode, \"wga30g4wUcx91ojP1fB6TR/h458=\", false, function () {\n  return [useDispatch, useSelector, useNavigate];\n});\n_c = QrCode;\nvar _c;\n$RefreshReg$(_c, \"QrCode\");","map":{"version":3,"names":["Button","useState","useRef","QrScanner","useNavigate","useSelector","useDispatch","scannerData","QrCode","dataFun","file","setfile","dispatch","designation_type","state","pageReducer","degination_type","navigate","fileRef","openScaner","current","click","handleScaner","e","target","files","scanImage","result","length","b","split","console","log","JSON","parse","display"],"sources":["E:/adesh/machine-maintence/src/component/qr_code.js"],"sourcesContent":["\r\nimport { Button } from 'antd';\r\nimport {useState,useRef } from 'react';\r\nimport QrScanner  from 'qr-scanner';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport {scannerData} from './redux/pageSlice'\r\nexport const QrCode=({dataFun})=>{\r\n    const [file, setfile] = useState(null);\r\n    // const [data, setData] = useState(null);\r\n    const dispatch = useDispatch();\r\n    const designation_type = useSelector(state=>state.pageReducer.degination_type)\r\n    const navigate = useNavigate('');\r\n    const fileRef = useRef()\r\n    const openScaner=()=>{\r\n       fileRef.current.click();\r\n    }\r\n    const handleScaner=async (e)=>{\r\n        const file = e.target.files[0];\r\n        setfile(file);\r\n        const result = await QrScanner.scanImage(file);\r\n        if(result.length){\r\n            const b = result.split(\" \")[0]\r\n            // setData(result.split(\"\"))\r\n            console.log(b,\"+++++++++++white something saying\")\r\n            dataFun(JSON.parse(b))\r\n            dispatch(scannerData(JSON.parse(b)));\r\n            console.log(designation_type,'innn qrcode page')\r\n            if(designation_type===\"Machanic\"){\r\n                navigate('/machanic')\r\n            }else{\r\n                navigate('/supervisor')\r\n            }\r\n\r\n        }\r\n    }\r\n    return (\r\n      <p> \r\n<Button type='primary' onClick={openScaner}>Scan Qr Code</Button>\r\n      <input \r\n      type=\"file\"\r\n      ref={fileRef} \r\n      onChange={handleScaner}\r\n      style={{display:'none'}}\r\n      accept=\".png, .jpg, .jpeg, .webp\"/>\r\n      </p>\r\n\r\n    );\r\n}\r\n  "],"mappings":";;;;;;AACA,SAASA,MAAM,QAAQ,MAAM;AAC7B,SAAQC,QAAQ,EAACC,MAAM,QAAQ,OAAO;AACtC,OAAOC,SAAS,MAAO,YAAY;AACnC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAAQC,WAAW,EAACC,WAAW,QAAO,aAAa;AACnD,SAAQC,WAAW,QAAO,mBAAmB;AAAA;AAC7C,OAAO,IAAMC,MAAM,GAAC,SAAPA,MAAM,OAAc;EAAA;EAAA,IAAXC,OAAO,QAAPA,OAAO;EACzB,gBAAwBR,QAAQ,CAAC,IAAI,CAAC;IAAA;IAA/BS,IAAI;IAAEC,OAAO;EACpB;EACA,IAAMC,QAAQ,GAAGN,WAAW,EAAE;EAC9B,IAAMO,gBAAgB,GAAGR,WAAW,CAAC,UAAAS,KAAK;IAAA,OAAEA,KAAK,CAACC,WAAW,CAACC,eAAe;EAAA,EAAC;EAC9E,IAAMC,QAAQ,GAAGb,WAAW,CAAC,EAAE,CAAC;EAChC,IAAMc,OAAO,GAAGhB,MAAM,EAAE;EACxB,IAAMiB,UAAU,GAAC,SAAXA,UAAU,GAAK;IAClBD,OAAO,CAACE,OAAO,CAACC,KAAK,EAAE;EAC1B,CAAC;EACD,IAAMC,YAAY;IAAA,uEAAC,iBAAOC,CAAC;MAAA;MAAA;QAAA;UAAA;YACjBb,IAAI,GAAGa,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;YAC9Bd,OAAO,CAACD,IAAI,CAAC;YAAC;YAAA,OACOP,SAAS,CAACuB,SAAS,CAAChB,IAAI,CAAC;UAAA;YAAxCiB,MAAM;YACZ,IAAGA,MAAM,CAACC,MAAM,EAAC;cACPC,CAAC,GAAGF,MAAM,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAC9B;cACAC,OAAO,CAACC,GAAG,CAACH,CAAC,EAAC,mCAAmC,CAAC;cAClDpB,OAAO,CAACwB,IAAI,CAACC,KAAK,CAACL,CAAC,CAAC,CAAC;cACtBjB,QAAQ,CAACL,WAAW,CAAC0B,IAAI,CAACC,KAAK,CAACL,CAAC,CAAC,CAAC,CAAC;cACpCE,OAAO,CAACC,GAAG,CAACnB,gBAAgB,EAAC,kBAAkB,CAAC;cAChD,IAAGA,gBAAgB,KAAG,UAAU,EAAC;gBAC7BI,QAAQ,CAAC,WAAW,CAAC;cACzB,CAAC,MAAI;gBACDA,QAAQ,CAAC,aAAa,CAAC;cAC3B;YAEJ;UAAC;UAAA;YAAA;QAAA;MAAA;IAAA,CACJ;IAAA,gBAlBKK,YAAY;MAAA;IAAA;EAAA,GAkBjB;EACD,oBACE;IAAA,wBACN,QAAC,MAAM;MAAC,IAAI,EAAC,SAAS;MAAC,OAAO,EAAEH,UAAW;MAAA,UAAC;IAAY;MAAA;MAAA;MAAA;IAAA,SAAS,eAC3D;MACA,IAAI,EAAC,MAAM;MACX,GAAG,EAAED,OAAQ;MACb,QAAQ,EAAEI,YAAa;MACvB,KAAK,EAAE;QAACa,OAAO,EAAC;MAAM,CAAE;MACxB,MAAM,EAAC;IAA0B;MAAA;MAAA;MAAA;IAAA,SAAE;EAAA;IAAA;IAAA;IAAA;EAAA,SAC/B;AAGV,CAAC;AAAA,GAzCY3B,MAAM;EAAA,QAGEF,WAAW,EACHD,WAAW,EACnBD,WAAW;AAAA;AAAA,KALnBI,MAAM;AAAA;AAAA"},"metadata":{},"sourceType":"module"}