{"ast":null,"code":"var _jsxFileName = \"E:\\\\adesh\\\\machine-maintence\\\\src\\\\component\\\\pages\\\\qr\\\\scanner.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport { Html5Qrcode } from \"html5-qrcode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport var Scanner = function Scanner(props) {\n  _s();\n  var fileRef = useRef(null);\n  // const [cameraList, setCameraList] = useState([]);\n  // const [activeCamera, setActiveCamera] = useState();\n  useEffect(function () {\n    html5QrCode = new Html5Qrcode(\"reader\");\n    getCameras();\n    var oldRegion = document.getElementById(\"qr-shaded-region\");\n    oldRegion && oldRegion.remove();\n  }, []);\n  var handleClickAdvanced = function handleClickAdvanced() {\n    var qrCodeSuccessCallback = function qrCodeSuccessCallback(decodedText, decodedResult) {\n      console.info(decodedResult, decodedText);\n      props.onResult(decodedText);\n      alert(\"decoded:__ \".concat(decodedText));\n      handleStop();\n    };\n    html5QrCode.start({\n      facingMode: \"environment\"\n    }, props.type === \"QR\" ? qrConfig : brConfig, qrCodeSuccessCallback).then(function () {\n      // const oldRegion = document.getElementById(\"qr-shaded-region\");\n      // if (oldRegion) oldRegion.innerHTML = \"\";\n    });\n  };\n  var getCameras = function getCameras() {\n    Html5Qrcode.getCameras().then(function (devices) {\n      /**\r\n       * devices would be an array of objects of type:\r\n       * { id: \"id\", label: \"label\" }\r\n       */\n      console.info(devices);\n      if (devices && devices.length) {\n        // setCameraList(devices);\n        // setActiveCamera(devices[0]);\n      }\n    }).catch(function (err) {\n      console.error(err);\n      // setCameraList([]);\n    });\n  };\n  // const onCameraChange = (e) => {\n  //   if (e.target.selectedIndex) {\n  //     let selectedCamera = e.target.options[e.target.selectedIndex];\n  //     console.info(selectedCamera);\n  //     let cameraId = selectedCamera.dataset.key;\n  //     setActiveCamera(cameraList.find((cam) => cam.id === cameraId));\n  //   }\n  // };\n  var handleStop = function handleStop() {\n    try {\n      html5QrCode.stop().then(function (res) {\n        html5QrCode.clear();\n      }).catch(function (err) {\n        console.log(err.message);\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  // const scanLocalFile = () => {\n  //   fileRef.current.click();\n  // };\n  // const scanFile = (e) => {\n  //   if (e.target.files.length === 0) {\n  //     // No file selected, ignore\n  //     return;\n  //   }\n\n  //   // Use the first item in the list\n  //   const imageFile = e.target.files[0];\n  //   console.info(imageFile);\n  //   html5QrCode\n  //     .scanFile(imageFile, /* showImage= */ true)\n  //     .then((qrCodeMessage) => {\n  //       // success, use qrCodeMessage\n  //       console.log(qrCodeMessage);\n  //       props.onResult(qrCodeMessage);\n  //       html5QrCode.clear();\n  //     })\n  //     .catch((err) => {\n  //       // failure, handle it.\n  //       console.log(`Error scanning file. Reason: ${err}`);\n  //     });\n  // };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"reader\",\n      width: \"100%\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: function onClick() {\n        return handleClickAdvanced();\n      },\n      children: [\"click pro \", props.type]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: function onClick() {\n        return handleStop();\n      },\n      children: \"stop pro\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 7\n  }, _this);\n};\n_s(Scanner, \"VGcoKVR6v+qGpTQB4GCc3u/yzEA=\");\n_c = Scanner;\nvar _c;\n$RefreshReg$(_c, \"Scanner\");","map":{"version":3,"names":["React","useEffect","useRef","Html5Qrcode","Scanner","props","fileRef","html5QrCode","getCameras","oldRegion","document","getElementById","remove","handleClickAdvanced","qrCodeSuccessCallback","decodedText","decodedResult","console","info","onResult","alert","handleStop","start","facingMode","type","qrConfig","brConfig","then","devices","length","catch","err","error","stop","res","clear","log","message","position"],"sources":["E:/adesh/machine-maintence/src/component/pages/qr/scanner.js"],"sourcesContent":["import React, {useEffect,useRef} from \"react\";\r\nimport  {Html5Qrcode} from \"html5-qrcode\";\r\nexport const Scanner = (props) => {\r\n    const fileRef = useRef(null);\r\n    // const [cameraList, setCameraList] = useState([]);\r\n    // const [activeCamera, setActiveCamera] = useState();\r\n    useEffect(() => {\r\n      html5QrCode = new Html5Qrcode(\"reader\");\r\n      getCameras();\r\n      const oldRegion = document.getElementById(\"qr-shaded-region\");\r\n      oldRegion && oldRegion.remove();\r\n    }, []);\r\n  \r\n    const handleClickAdvanced = () => {\r\n      const qrCodeSuccessCallback = (decodedText, decodedResult) => {\r\n        console.info(decodedResult, decodedText);\r\n        props.onResult(decodedText);\r\n        alert(`decoded:__ ${decodedText}`);\r\n        handleStop();\r\n      };\r\n      html5QrCode\r\n        .start(\r\n          { facingMode: \"environment\" },\r\n          props.type === \"QR\" ? qrConfig : brConfig,\r\n          qrCodeSuccessCallback\r\n        )\r\n        .then(() => {\r\n          // const oldRegion = document.getElementById(\"qr-shaded-region\");\r\n          // if (oldRegion) oldRegion.innerHTML = \"\";\r\n        });\r\n    };\r\n    const getCameras = () => {\r\n      Html5Qrcode.getCameras()\r\n        .then((devices) => {\r\n          /**\r\n           * devices would be an array of objects of type:\r\n           * { id: \"id\", label: \"label\" }\r\n           */\r\n          console.info(devices);\r\n          if (devices && devices.length) {\r\n            // setCameraList(devices);\r\n            // setActiveCamera(devices[0]);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.error(err);\r\n          // setCameraList([]);\r\n        });\r\n    };\r\n    // const onCameraChange = (e) => {\r\n    //   if (e.target.selectedIndex) {\r\n    //     let selectedCamera = e.target.options[e.target.selectedIndex];\r\n    //     console.info(selectedCamera);\r\n    //     let cameraId = selectedCamera.dataset.key;\r\n    //     setActiveCamera(cameraList.find((cam) => cam.id === cameraId));\r\n    //   }\r\n    // };\r\n    const handleStop = () => {\r\n      try {\r\n        html5QrCode\r\n          .stop()\r\n          .then((res) => {\r\n            html5QrCode.clear();\r\n          })\r\n          .catch((err) => {\r\n            console.log(err.message);\r\n          });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n    // const scanLocalFile = () => {\r\n    //   fileRef.current.click();\r\n    // };\r\n    // const scanFile = (e) => {\r\n    //   if (e.target.files.length === 0) {\r\n    //     // No file selected, ignore\r\n    //     return;\r\n    //   }\r\n  \r\n    //   // Use the first item in the list\r\n    //   const imageFile = e.target.files[0];\r\n    //   console.info(imageFile);\r\n    //   html5QrCode\r\n    //     .scanFile(imageFile, /* showImage= */ true)\r\n    //     .then((qrCodeMessage) => {\r\n    //       // success, use qrCodeMessage\r\n    //       console.log(qrCodeMessage);\r\n    //       props.onResult(qrCodeMessage);\r\n    //       html5QrCode.clear();\r\n    //     })\r\n    //     .catch((err) => {\r\n    //       // failure, handle it.\r\n    //       console.log(`Error scanning file. Reason: ${err}`);\r\n    //     });\r\n    // };\r\n  \r\n    return (\r\n      <div style={{ position: \"relative\" }}>\r\n        <div id=\"reader\" width=\"100%\"></div>\r\n        {/* <button onClick={getCameras}>Get List of cameras</button>\r\n        {cameraList.length > 0 && (\r\n          <select onChange={onCameraChange}>\r\n            {cameraList.map((li) => (\r\n              <option\r\n                key={li.id}\r\n                id={li.id}\r\n                selected={activeCamera && activeCamera.id === li.id}\r\n              >\r\n                {li.label}\r\n              </option>\r\n            ))}\r\n            <option>Dummy</option>\r\n          </select>\r\n        )} */}\r\n        <button onClick={() => handleClickAdvanced()}>\r\n          click pro {props.type}\r\n        </button>\r\n        <button onClick={() => handleStop()}>stop pro</button>\r\n        <br />\r\n        <br />\r\n        {/* <button onClick={scanLocalFile}>Scan local file</button> */}\r\n        {/* <input\r\n          type=\"file\"\r\n          hidden\r\n          ref={fileRef}\r\n          accept=\"image/*\"\r\n          onChange={scanFile}\r\n        /> */}\r\n      </div>\r\n    );\r\n  };"],"mappings":"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"},"metadata":{},"sourceType":"module"}